import { ReactNode } from 'react';
import { NavButton } from '@/components/ui/navbutton';
import { useRouter } from 'next/router';
import { useSession, signIn, signOut } from 'next-auth/react';

import { Button } from './ui/button';

interface LayoutProps {
  children: ReactNode;
}

export function Layout({ children }: LayoutProps) {
  const { data: session } = useSession();
  const router = useRouter();
  return (
    <div className='flex h-screen bg-primary'>
      <aside className='w-1/5 bg-gradient-to-b from-red-300 p-4 flex flex-col items-center'>
        <button className='p-0 m-0 inline-flex items-center justify-center relative w-8 h-60 hover:scale-110 hover:transition-transform'>
          <svg
            className='absolute'
            xmlns='http://www.w3.org/2000/svg'
            width='300'
            height='290'
            viewBox='0 0 1080 1080'
            version='1.1'
            onClick={() => router.push('/')}
          >
            <path
              d='M 423.250 646.662 C 422.489 646.969, 422.066 648.797, 422.168 651.333 L 422.336 655.500 422.728 651.750 C 423.089 648.301, 423.377 647.994, 426.310 647.930 C 428.999 647.870, 429.186 647.725, 427.500 647 C 425.185 646.005, 424.929 645.985, 423.250 646.662 M 428 657.500 C 428 662.358, 428.192 666.141, 428.428 665.906 C 429.146 665.187, 429.353 650.020, 428.654 649.321 C 428.294 648.961, 428 652.642, 428 657.500 M 386.310 658.500 C 386.315 661.800, 386.502 663.029, 386.725 661.232 C 386.947 659.435, 386.943 656.735, 386.715 655.232 C 386.486 653.729, 386.304 655.200, 386.310 658.500 M 386.349 678 C 386.349 682.675, 386.522 684.587, 386.732 682.250 C 386.943 679.913, 386.943 676.087, 386.732 673.750 C 386.522 671.413, 386.349 673.325, 386.349 678 M 428.328 679.500 C 428.333 683.350, 428.513 684.802, 428.730 682.728 C 428.946 680.653, 428.943 677.503, 428.722 675.728 C 428.501 673.952, 428.324 675.650, 428.328 679.500'
              stroke='none'
              fill='#090c0a'
              fill-rule='evenodd'
            />
            <path
              d='M 523 410.175 C 519.975 410.690, 516.825 411.399, 516 411.749 C 515.175 412.099, 514.050 412.435, 513.500 412.496 C 510.001 412.880, 489.530 421.676, 486.685 424.018 C 486.033 424.554, 482.741 427.018, 479.369 429.492 C 466.994 438.572, 454.008 455.103, 448.457 468.842 C 446.977 472.504, 445.404 476.400, 444.960 477.500 C 439.842 490.192, 438.778 517.989, 442.824 533.288 C 445.277 542.561, 451.356 557, 452.807 557 C 453.279 557, 455.131 555.176, 456.922 552.948 C 460.065 549.036, 460.127 548.784, 458.709 545.698 C 453.085 533.456, 452.564 530.433, 452.553 510 C 452.542 491.202, 452.643 490.212, 455.341 482.500 C 465.594 453.201, 486.002 433.164, 514.422 424.495 C 552.609 412.848, 593.445 427.793, 615.385 461.446 C 622.132 471.796, 625.631 480.195, 628.055 491.860 C 631.474 508.313, 629.898 530.282, 624.401 542.788 L 622.076 548.076 626.038 552.038 C 628.217 554.217, 630.250 556, 630.555 556 C 631.756 556, 636.025 545, 638.431 535.706 C 641.677 523.166, 642.633 509.793, 641.063 498.900 C 637.761 475.984, 629.010 456.621, 615.319 441.936 C 599.561 425.032, 580.009 414.264, 558 410.367 C 549.529 408.867, 531.262 408.767, 523 410.175 M 591.500 449.466 C 590.950 449.636, 587.892 450.352, 584.703 451.058 C 581.515 451.764, 578.672 452.722, 578.384 453.187 C 578.097 453.652, 577.481 453.797, 577.015 453.509 C 576.549 453.221, 574.898 453.469, 573.345 454.059 L 570.522 455.132 575.511 459.469 L 580.500 463.805 574.540 470.153 L 568.580 476.500 555.540 463.268 C 548.368 455.990, 542.046 450.027, 541.492 450.018 C 540.937 450.008, 530.190 460.301, 517.609 472.891 C 492.168 498.350, 493.360 496.238, 500.870 502.548 L 504.239 505.379 523.008 486.384 L 541.777 467.389 554.638 480.188 C 561.712 487.228, 568.027 492.990, 568.671 492.994 C 569.315 492.997, 574.407 488.100, 579.987 482.111 L 590.131 471.222 593.815 474.606 C 595.842 476.468, 597.837 477.993, 598.250 477.995 C 598.663 477.998, 599 471.475, 599 463.500 L 599 449 595.750 449.079 C 593.962 449.122, 592.050 449.297, 591.500 449.466 M 500.995 531.541 L 460.500 572.081 470 581.353 C 488.030 598.950, 505.873 607.516, 529.934 610.126 C 556.198 612.974, 581.289 606.105, 602.528 590.250 C 610.027 584.652, 623.694 571.394, 622.874 570.513 C 614.407 561.408, 543.278 491, 542.548 491 C 541.966 491, 523.268 509.243, 500.995 531.541 M 510.159 542.341 L 478.831 573.681 483.665 577.955 C 486.324 580.306, 490.750 583.653, 493.500 585.393 C 499.417 589.138, 512.026 595, 514.163 595 C 514.990 595, 515.980 595.313, 516.362 595.696 C 516.745 596.078, 517.607 596.480, 518.279 596.588 C 518.951 596.697, 522.399 597.319, 525.943 597.972 C 536.221 599.864, 547.286 599.458, 562.500 596.630 C 563.050 596.527, 563.950 596.172, 564.500 595.839 C 565.050 595.507, 566.995 594.914, 568.822 594.522 C 576.870 592.795, 590.783 585.041, 600.691 576.760 L 604.881 573.257 602.691 571.258 C 601.486 570.158, 587.467 556.150, 571.538 540.129 C 555.610 524.108, 542.332 511, 542.033 511 C 541.733 511, 527.390 525.103, 510.159 542.341 M 380.228 646.838 C 379.254 647.456, 379.019 652.199, 379.228 667.073 L 379.500 686.500 382.500 686.500 L 385.500 686.500 385.790 678.250 L 386.081 670 395.040 670 L 404 670 404 667.061 C 404 664.350, 403.655 664.071, 399.556 663.456 C 397.112 663.090, 393.062 662.953, 390.556 663.152 L 386 663.514 386 658.257 L 386 653 396.617 653 C 407.138 653, 407.228 652.980, 406.630 650.750 C 406.299 649.513, 406.021 648.275, 406.013 648 C 406.004 647.725, 400.417 647.500, 393.596 647.500 C 386.775 647.500, 381.403 647.163, 381.656 646.750 C 382.244 645.795, 381.831 645.821, 380.228 646.838 M 518.498 646.765 C 517.532 647.474, 516.129 650.178, 513.447 656.500 C 512.747 658.150, 510.785 662.480, 509.087 666.123 C 507.389 669.765, 506 673.478, 506 674.373 C 506 675.268, 505.523 676, 504.941 676 C 504.359 676, 504.160 676.450, 504.500 677 C 504.840 677.550, 504.740 678, 504.277 678 C 503.815 678, 503.337 679.237, 503.216 680.750 C 503.095 682.263, 502.252 684.050, 501.344 684.722 C 499.810 685.859, 499.810 685.990, 501.349 686.580 C 504.530 687.801, 507.636 686.134, 509.378 682.271 L 511.078 678.500 521.039 678.500 C 530.275 678.500, 531.500 678.834, 531.118 681.250 C 531.053 681.663, 531.450 682, 532 682 C 532.550 682, 533 682.852, 533 683.893 C 533 685.980, 534.855 687, 538.649 687 C 540.759 687, 541.033 686.660, 540.463 684.750 C 540.094 683.513, 539.164 681.503, 538.396 680.285 C 537.628 679.067, 537 677.661, 537 677.160 C 537 676.659, 535.799 673.605, 534.332 670.374 C 532.864 667.143, 531.566 664.050, 531.446 663.500 C 531.326 662.950, 529.550 658.977, 527.498 654.671 C 524.066 647.466, 523.571 646.891, 521.300 647.461 C 519.714 647.859, 519.062 647.709, 519.475 647.040 C 520.225 645.826, 519.902 645.735, 518.498 646.765 M 588.972 647.534 C 587.978 648.731, 587.896 652.029, 588.599 662.536 C 589.443 675.148, 589.058 678.910, 587.445 673.827 C 587.066 672.632, 586.350 671.169, 585.855 670.577 C 585.360 669.985, 581.934 665.225, 578.242 660 C 574.550 654.775, 570.918 649.864, 570.172 649.086 C 568.429 647.270, 563.177 647.095, 562.511 648.832 C 561.785 650.723, 561.893 675.463, 562.654 681.802 C 563.253 686.787, 563.446 687.087, 565.887 686.802 L 568.484 686.500 568.492 671.992 L 568.500 657.484 572 662.579 C 587.638 685.342, 590.604 688.599, 593.866 686.583 C 594.444 686.225, 594.891 677.991, 594.958 666.461 L 595.070 646.944 592.386 647.618 C 590.493 648.093, 589.910 647.954, 590.410 647.146 C 591.441 645.478, 590.458 645.743, 588.972 647.534 M 452.500 647.952 L 449.500 648.527 449.500 667.514 L 449.500 686.500 452.500 686.500 L 455.500 686.500 455.803 674 C 455.970 667.125, 456.202 661.139, 456.320 660.699 C 456.438 660.258, 458.530 662.733, 460.970 666.199 C 463.410 669.664, 465.780 672.950, 466.236 673.500 C 466.692 674.050, 469.138 677.336, 471.670 680.803 C 475.539 686.098, 476.693 687.058, 478.888 686.803 L 481.500 686.500 481.500 667.541 L 481.500 648.582 478.403 647.949 C 475.393 647.333, 475.307 647.416, 475.345 650.908 C 475.476 663.125, 474.875 673, 474 673 C 473.450 673, 473 672.502, 473 671.894 C 473 671.286, 471.573 668.986, 469.828 666.783 C 468.083 664.580, 464.926 660.101, 462.811 656.829 C 457.342 648.367, 456.066 647.268, 452.500 647.952 M 631.469 648.062 C 627.908 649.098, 622.205 654.384, 620.771 657.977 C 617.708 665.653, 619.278 675.849, 624.322 681.035 C 632.828 689.780, 646.151 690.073, 653.874 681.685 C 655.876 679.511, 656.033 678.902, 654.874 677.803 C 653.128 676.147, 650 675.591, 650 676.936 C 650 677.499, 648.313 678.788, 646.250 679.800 C 643.313 681.242, 641.450 681.479, 637.655 680.890 C 629.978 679.699, 626 674.772, 626 666.454 C 626 655.893, 636.426 649.897, 646.466 654.685 C 648.410 655.612, 650 656.737, 650 657.185 C 650 658.606, 654.702 658.064, 656.006 656.492 C 657.037 655.250, 656.839 654.571, 654.879 652.631 C 650.840 648.635, 646.520 646.993, 640.300 647.090 C 637.110 647.140, 633.136 647.577, 631.469 648.062 M 676 667.030 L 676 686.810 690 686.942 L 704 687.075 704 684.037 L 704 681 693.500 681 L 683 681 683 675.538 L 683 670.075 692.250 669.788 L 701.500 669.500 701.500 666.500 L 701.500 663.500 692.249 663.500 L 682.997 663.500 682.999 658.250 L 683 653 693.500 653 L 704 653 704 650.088 L 704 647.176 690 647.212 L 676 647.249 676 667.030 M 422.480 655.371 C 422.100 659.425, 422.015 668.088, 422.292 674.621 L 422.794 686.500 425.397 686.816 C 428.333 687.173, 428.211 688.251, 428.412 660.256 L 428.500 648.012 425.835 648.006 C 423.252 648, 423.150 648.224, 422.480 655.371 M 519.310 658.750 C 517.132 664.832, 514.716 670.638, 514.006 671.498 C 513.466 672.152, 515.718 672.500, 520.486 672.500 L 527.795 672.500 526.372 669.750 C 525.589 668.237, 525.193 667, 525.491 667 C 525.790 667, 524.894 664.750, 523.500 662 C 520.724 656.521, 520.242 656.148, 519.310 658.750'
              stroke='none'
              fill='#040404'
              fill-rule='evenodd'
            />
          </svg>
        </button>

        <nav className='flex flex-col items-center justify-center w-full h-2/3 space-y-8'>
          {session ? (
            <>
              <NavButton href='/transactions-table'>
                Ingresos y egresos
              </NavButton>
              <NavButton href='/users-table'>Gestión de usuarios</NavButton>
              <NavButton href='/transactions-chart'>Reportes</NavButton>
              <Button
                onClick={async () => {
                  await signOut({ redirect: false });
                  window.location.href = `https://${
                    process.env.NEXT_PUBLIC_AUTH0_DOMAIN
                  }/v2/logout?client_id=${
                    process.env.NEXT_PUBLIC_AUTH0_CLIENT_ID
                  }&returnTo=${encodeURIComponent('http://localhost:3000')}`;
                }}
                className='bg-gray-500 text-white px-4 py-2 rounded mt-2 hover:scale-110'
              >
                Cerrar Sesión
              </Button>
            </>
          ) : (
            <>
              <Button
                onClick={() => signIn('auth0')}
                className='bg-blue-500 text-white px-4 py-2 rounded mt-4'
              >
                Iniciar Sesión
              </Button>
            </>
          )}
        </nav>
      </aside>
      <main className='flex-1 flex justify-center items-center'>
        {children}
      </main>
    </div>
  );
}
